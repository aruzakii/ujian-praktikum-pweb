{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kuliah\\\\Semester5\\\\pweb\\\\tugas lanjutan api\\\\frontend\\\\src\\\\components\\\\DeleteButton.js\",\n  _s = $RefreshSig$();\nimport Button from 'react-bootstrap/Button';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DeleteButton = ({\n  id\n}) => {\n  _s();\n  const deleteUrl = `http://localhost:8080/v1/student/${id}`;\n  const navigate = useNavigate();\n  const handleDelete = async () => {\n    const token = localStorage.getItem(\"token\");\n    console.log(\"Token:\", token);\n    try {\n      const response = await fetch(deleteUrl, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          \"Authorization\": token\n        }\n      });\n      if (response.ok) {\n        // Jika penghapusan berhasil, panggil fungsi onDelete yang diberikan sebagai prop\n        window.location.reload();\n        alert(\"Data Berhasil Dihapus\");\n      } else {\n        if (response.status === 401) {\n          // Unauthorized, token tidak valid\n          navigate('/', {\n            state: {\n              error: 'Timeout Access. Please log in'\n            }\n          });\n        }\n        console.error('Gagal menghapus data:', response.status);\n      }\n    } catch (error) {\n      console.error('Terjadi kesalahan:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Button, {\n    className: \"ml-3\",\n    variant: \"danger\",\n    onClick: handleDelete,\n    children: \"Delete\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 7\n  }, this);\n};\n_s(DeleteButton, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n_c = DeleteButton;\nexport default DeleteButton;\nvar _c;\n$RefreshReg$(_c, \"DeleteButton\");","map":{"version":3,"names":["Button","useNavigate","jsxDEV","_jsxDEV","DeleteButton","id","_s","deleteUrl","navigate","handleDelete","token","localStorage","getItem","console","log","response","fetch","method","headers","ok","window","location","reload","alert","status","state","error","className","variant","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Kuliah/Semester5/pweb/tugas lanjutan api/frontend/src/components/DeleteButton.js"],"sourcesContent":["import Button from 'react-bootstrap/Button';\r\nimport { useNavigate } from 'react-router-dom';\r\nconst DeleteButton = ({ id }) => {\r\n    const deleteUrl = `http://localhost:8080/v1/student/${id}`;\r\n    const navigate = useNavigate();\r\n  \r\n    const handleDelete = async () => {\r\n      const token = localStorage.getItem(\"token\");\r\n      console.log(\"Token:\", token);\r\n      try {\r\n        const response = await fetch(deleteUrl, {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            \"Authorization\": token\r\n          },\r\n        });\r\n  \r\n        if (response.ok) {\r\n          // Jika penghapusan berhasil, panggil fungsi onDelete yang diberikan sebagai prop\r\n          window.location.reload();\r\n          alert(\"Data Berhasil Dihapus\")\r\n        } else {\r\n          if (response.status === 401) {\r\n            // Unauthorized, token tidak valid\r\n            navigate('/', { state: { error: 'Timeout Access. Please log in' } });\r\n          }\r\n          console.error('Gagal menghapus data:', response.status);\r\n        }\r\n      } catch (error) {\r\n        console.error('Terjadi kesalahan:', error);\r\n      }\r\n    };\r\n  \r\n    return (\r\n      <Button className='ml-3' variant=\"danger\" onClick={handleDelete}>\r\n        Delete\r\n      </Button>\r\n    );\r\n  };\r\n\r\n  export default DeleteButton;"],"mappings":";;AAAA,OAAOA,MAAM,MAAM,wBAAwB;AAC3C,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAC/C,MAAMC,YAAY,GAAGA,CAAC;EAAEC;AAAG,CAAC,KAAK;EAAAC,EAAA;EAC7B,MAAMC,SAAS,GAAI,oCAAmCF,EAAG,EAAC;EAC1D,MAAMG,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAE9B,MAAMQ,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3CC,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEJ,KAAK,CAAC;IAC5B,IAAI;MACF,MAAMK,QAAQ,GAAG,MAAMC,KAAK,CAACT,SAAS,EAAE;QACtCU,MAAM,EAAE,QAAQ;QAChBC,OAAO,EAAE;UACP,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAER;QACnB;MACF,CAAC,CAAC;MAEF,IAAIK,QAAQ,CAACI,EAAE,EAAE;QACf;QACAC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;QACxBC,KAAK,CAAC,uBAAuB,CAAC;MAChC,CAAC,MAAM;QACL,IAAIR,QAAQ,CAACS,MAAM,KAAK,GAAG,EAAE;UAC3B;UACAhB,QAAQ,CAAC,GAAG,EAAE;YAAEiB,KAAK,EAAE;cAAEC,KAAK,EAAE;YAAgC;UAAE,CAAC,CAAC;QACtE;QACAb,OAAO,CAACa,KAAK,CAAC,uBAAuB,EAAEX,QAAQ,CAACS,MAAM,CAAC;MACzD;IACF,CAAC,CAAC,OAAOE,KAAK,EAAE;MACdb,OAAO,CAACa,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;IAC5C;EACF,CAAC;EAED,oBACEvB,OAAA,CAACH,MAAM;IAAC2B,SAAS,EAAC,MAAM;IAACC,OAAO,EAAC,QAAQ;IAACC,OAAO,EAAEpB,YAAa;IAAAqB,QAAA,EAAC;EAEjE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAQ,CAAC;AAEb,CAAC;AAAC5B,EAAA,CArCEF,YAAY;EAAA,QAEGH,WAAW;AAAA;AAAAkC,EAAA,GAF1B/B,YAAY;AAuChB,eAAeA,YAAY;AAAC,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}